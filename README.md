# WowPixelDumper 

**è´¼å¿ƒä¸æ­»ï¼Œç»§ç»­å¥‹æ–—** ğŸ’ª 

## æºèµ·ä¸ç›®çš„

æœ¬é¡¹ç›®è¯ç”Ÿäºä¸€ä¸ªç®€å•çš„æƒ³æ³•ï¼š**åœ¨12.0ç‰ˆæœ¬ä¸­ï¼Œå°†ç§˜å¯†å€¼é€šè¿‡åƒç´ åŒ–çš„æ–¹å¼ä¼ é€’ç»™å¤–éƒ¨ç¨‹åº**ã€‚  

è¿‡å»ï¼ŒWoW çš„æ’ä»¶ API æä¾›äº†ä¸°å¯Œçš„æ¸¸æˆæ•°æ®ï¼Œä½†åœ¨æœ€æ–°çš„æ¸¸æˆæ›´æ–°ä¸­ï¼Œè¿™äº›æ•°æ®è¢«é™åˆ¶ä¸º"ç§˜å¯†å€¼"ï¼Œæ— æ³•è¢«ä½¿ç”¨ã€‚ä½†ç§˜å¯†å€¼å¯ä»¥è¢«ç¼–ç ä¸ºå±å¹•è§’è½çš„å½©è‰²åƒç´ å—ï¼Œä»è€Œè®©å¤–éƒ¨ç¨‹åºé€šè¿‡å±å¹•æ•è·è·å–ç»“æ„åŒ–ä¿¡æ¯ã€‚  

**è¿™ä¸æ˜¯ä¸€ä¸ªå¼€ç®±å³ç”¨çš„äº§å“ï¼Œè€Œæ˜¯ä¸€ä¸ªæŠ€æœ¯ç¤ºä¾‹ã€‚** ä»£ç å®Œå…¨å¼€æºï¼Œæ„åœ¨å±•ç¤º"åƒç´ æ¡¥æ¥"è¿™ä¸€æ€è·¯çš„å¯è¡Œæ€§ã€‚å¦‚æœä½ è®¤åŒè¿™ä¸ªæ–¹å‘ï¼Œå»ºè®®åœ¨æ­¤åŸºç¡€ä¸Šè¿›è¡Œ**ä¸ªæ€§åŒ–æ”¹é€ **â€”â€”è°ƒæ•´åƒç´ å¸ƒå±€ã€ä¿®æ”¹æ•°æ®ç»“æ„ã€æ›´æ¢é€šä¿¡æ–¹å¼ï¼Œè®©å®ƒæˆä¸ºä½ ç‹¬æœ‰çš„å®ç°ã€‚  

**å¦‚ä½•å¼€å§‹ï¼Ÿ** æ¨èä½¿ç”¨ **vibe coding** çš„æ–¹å¼ï¼šå€ŸåŠ© AI ç¼–ç¨‹å·¥å…·ï¼ˆå¦‚ Clineã€Traeã€Kimi Codeã€Qoder ç­‰ï¼‰ï¼Œè®© AI ååŠ©ä½ ç†è§£ä»£ç é€»è¾‘å¹¶å¯¹æœ¬é¡¹ç›®è¿›è¡Œè½»é‡çº§é‡æ„ã€‚å³ä½¿ä½ ä¸æ˜¯ä¸“ä¸šå¼€å‘è€…ï¼Œä¹Ÿå¯ä»¥é€šè¿‡è‡ªç„¶è¯­è¨€æè¿°éœ€æ±‚ï¼Œå¿«é€Ÿç”Ÿæˆç¬¦åˆè‡ªå·±ä¹ æƒ¯çš„ä»£ç å˜ä½“ï¼Œä»è€Œæ¶ˆé™¤æœ¬é¡¹ç›®çš„å¯è¯†åˆ«ç‰¹å¾ã€‚  

é¡¹ç›®é‡‡ç”¨ **Dumper + HTTP API** çš„æ¶æ„è®¾è®¡ï¼šDumper è´Ÿè´£åƒç´ æ•è·ä¸è§£æï¼Œé€šè¿‡æœ¬åœ° HTTP æœåŠ¡ï¼ˆé»˜è®¤ç«¯å£ 65131ï¼‰ä»¥ JSON æ ¼å¼è¾“å‡ºæ•°æ®ã€‚è¿™ç§è§£è€¦è®¾è®¡è®©ä½ å¯ä»¥ç”¨ä»»ä½•ç†Ÿæ‚‰çš„è¯­è¨€ï¼ˆPythonã€C#ã€Lua ç­‰ï¼‰ç‹¬ç«‹å¼€å‘åç»­çš„ Rotation é€»è¾‘ã€‚  


---

ä¸€ä¸ªç”¨äºã€Šé­”å…½ä¸–ç•Œã€‹ï¼ˆWorld of Warcraftï¼‰çš„**æ¸¸æˆæ•°æ®åƒç´ åŒ–æ’ä»¶**ï¼Œé€šè¿‡å°†æ¸¸æˆå†…çš„å¯æ”¶é›†ä¿¡æ¯è½¬æ¢ä¸ºå±å¹•è§’è½çš„åƒç´ ç‚¹ï¼Œè®©å¤–éƒ¨ç¨‹åºå¯ä»¥è½»æ¾è¯»å–å¹¶è§£æä¸ºç»“æ„åŒ–æ•°æ®ã€‚  

> âš ï¸ **é‡è¦å£°æ˜**ï¼šæœ¬é¡¹ç›®ä»…ä¸ºæŠ€æœ¯æ¼”ç¤ºå’Œæ€è·¯å‚è€ƒï¼Œ**è¯·å‹¿ç›´æ¥åœ¨æ­£å¼æ¸¸æˆç¯å¢ƒä¸­ä½¿ç”¨**ï¼Œå¦åˆ™å¯èƒ½å¯¼è‡´è´¦å·å°ç¦ã€‚é¡¹ç›®æ—¨åœ¨æŠ›ç –å¼•ç‰ï¼Œå±•ç¤ºä¸€ç§æ•°æ®æå–çš„æ€è·¯ï¼Œä½¿ç”¨è€…éœ€è‡ªè¡Œæ‰¿æ‹…é£é™©ã€‚  

---

## é‡è¦

è¸©å‘é¢‡å¤šï¼Œç»å¸¸é‡æ„ï¼Œä¸è¦åœ¨ä¹gitå†å²ã€‚ç°åœ¨æ˜¯ç¬¬7ä¸ªå¯å€Ÿé‰´ç‰ˆæœ¬ã€‚  

---

## ğŸ§  å·¥å…·åŸç†

é€šè¿‡æ¸¸æˆå†…ç½® API å°†å„ç±»æ¸¸æˆä¿¡æ¯ï¼ˆç”Ÿå‘½å€¼ã€æŠ€èƒ½å†·å´ã€å…‰ç¯æ•ˆæœç­‰ï¼‰æ¸²æŸ“ä¸ºå±å¹•è§’è½çš„ä¸€ç³»åˆ— **8Ã—8 åƒç´ å—**ï¼Œæ¯ä¸ªåƒç´ å—ä»£è¡¨ä¸€ç§ç‰¹å®šä¿¡æ¯ã€‚å¤–éƒ¨ Python ç¨‹åºé€šè¿‡å±å¹•æ•è·è¯»å–è¿™äº›åƒç´ å—ï¼Œåˆ©ç”¨ NumPy è¿›è¡Œé«˜æ•ˆå¤„ç†ï¼Œæœ€ç»ˆè¾“å‡ºç»“æ„åŒ– JSON æ•°æ®æˆ–æä¾› Web API æœåŠ¡ã€‚  

**ä¸ºä»€ä¹ˆç”¨åƒç´ å—ï¼Ÿ**  
- æ˜“äºè¢« `numpy` è¯»å–ä¸ºæ•°ç»„ï¼Œé¿å…å¤æ‚çš„å›¾åƒè¯†åˆ«å’Œå¤§æ¨¡å‹è®¡ç®—  
- æ€§èƒ½å¼€é”€æä½ï¼Œé€‚åˆé«˜é¢‘ç‡åˆ·æ–°  
- ç»“æ„å›ºå®šï¼Œè§£æé€»è¾‘ç®€å•å¯é   

---

## ğŸ—ï¸ é¡¹ç›®ç»“æ„

```
WowPixelDumper/
â”œâ”€â”€ Addons/WowPixelDumper/     # é­”å…½ä¸–ç•Œæ’ä»¶
â”‚   â”œâ”€â”€ WowPixelDumper.lua     # æ’ä»¶ä¸»é€»è¾‘
â”‚   â”œâ”€â”€ WowPixelDumper.toc     # æ’ä»¶é…ç½®
â”‚   â”œâ”€â”€ Setting.lua            # è®¾ç½®
â”‚   â”œâ”€â”€ Class/                 # èŒä¸šç‰¹å®šé…ç½®
â”‚   â”‚   â”œâ”€â”€ Druid.lua
â”‚   â”‚   â””â”€â”€ Priest.lua
â”‚   â”œâ”€â”€ Fonts/                 # è‡ªå®šä¹‰å­—ä½“ï¼ˆå±‚æ•°/å……èƒ½æ•°æ˜¾ç¤ºï¼‰
â”‚   â””â”€â”€ Libs/                  # ä¾èµ–åº“ï¼ˆLibRangeCheckç­‰ï¼‰
â”‚
â”œâ”€â”€ Dumper/                    # Python æ•°æ®æå–å™¨
â”‚   â”œâ”€â”€ DumperGUI.py           # ç¨‹åºå…¥å£
â”‚   â”œâ”€â”€ MainWindow.py          # ä¸»çª—å£ï¼ˆUIæ§åˆ¶ã€é®æŒ¡æ£€æµ‹ï¼‰
â”‚   â”œâ”€â”€ Worker.py              # å·¥ä½œçº¿ç¨‹ï¼ˆCameraWorker + WebServerWorkerï¼‰
â”‚   â”œâ”€â”€ IconLibraryDialog.py   # å›¾æ ‡åº“ç®¡ç†å¯¹è¯æ¡†ï¼ˆ4ä¸ªTabï¼‰
â”‚   â”œâ”€â”€ Node.py                # Node + NodeExtractorï¼ˆåƒç´ èŠ‚ç‚¹è§£æï¼‰
â”‚   â”œâ”€â”€ NodeExtractorData.py   # extract_all_data + ColorMapåŠ è½½
â”‚   â”œâ”€â”€ Database.py            # NodeTitleManagerï¼ˆSQLiteæ•°æ®åº“ã€ä½™å¼¦ç›¸ä¼¼åº¦ï¼‰
â”‚   â”œâ”€â”€ Utils.py               # å·¥å…·å‡½æ•°ï¼ˆæ¨¡æ¿åŒ¹é…ã€è¾¹ç•ŒæŸ¥æ‰¾ï¼‰
â”‚   â”œâ”€â”€ test_script.py         # åŠŸèƒ½æµ‹è¯•è„šæœ¬
â”‚   â”œâ”€â”€ comment_deleter.py     # ASTæ³¨é‡Šåˆ é™¤å·¥å…·
â”‚   â”œâ”€â”€ mark8.png              # æ¨¡æ¿æ ‡è®°ï¼ˆå®šä½åƒç´ åŒºåŸŸï¼‰
â”‚   â”œâ”€â”€ node_titles.db         # SQLiteæ•°æ®åº“ï¼ˆè¿è¡Œæ—¶ç”Ÿæˆï¼‰
â”‚   â””â”€â”€ ColorMap.json          # é¢œè‰²æ˜ å°„é…ç½®ï¼ˆèŒä¸šã€Buffç±»å‹ç­‰ï¼‰
â”‚
â”œâ”€â”€ README.md                  # æœ¬æ–‡ä»¶
â”œâ”€â”€ CHANGELOG.md               # æ›´æ–°æ—¥å¿—
â”œâ”€â”€ pyproject.toml             # Pythonä¾èµ–é…ç½®
â””â”€â”€ deploy.py                  # ç¼–è¯‘è„šæœ¬
```

---

## ğŸš€ ç›®å‰å·²å®ç°çš„åŠŸèƒ½

###  **ç©å®¶ä¿¡æ¯**
-  å½“å‰ç”Ÿå‘½å€¼ç™¾åˆ†æ¯”ï¼ˆç²¾åº¦1/255ï¼Œé€šè¿‡äº®åº¦å€¼è®¡ç®—ï¼‰
-  å½“å‰èƒ½é‡æ¡ç™¾åˆ†æ¯”ï¼ˆé€šè¿‡äº®åº¦å€¼è®¡ç®—ï¼‰
-  ä¼¤å®³å¸æ”¶ç›¾å æ€»ç”Ÿå‘½å€¼çš„ç™¾åˆ†æ¯”ï¼ˆç²¾åº¦1.25%ï¼‰
-  æ²»ç–—å¸æ”¶ç›¾å æ€»ç”Ÿå‘½å€¼çš„ç™¾åˆ†æ¯”ï¼ˆç²¾åº¦1.25%ï¼‰
-  æ˜¯å¦åœ¨ç§»åŠ¨
-  æ˜¯å¦åœ¨æˆ˜æ–—ä¸­
-  æ˜¯å¦åœ¨è½½å…·ä¸­
-  æ˜¯å¦åœ¨æ–½æ³•/å¼•å¯¼ä¸­
-  æ–½æ³•å›¾æ ‡/å¼•å¯¼å›¾æ ‡
-  æ–½æ³•è¿›åº¦/å¼•å¯¼è¿›åº¦
-  èŒä¸šå’ŒèŒè´£ï¼ˆé€šè¿‡é¢œè‰²æ˜ å°„ï¼‰
-  æ­»äº¡çŠ¶æ€
-  ç­‰ç­‰..

###  **æŠ€èƒ½ä¿¡æ¯**
-  æŠ€èƒ½å›¾æ ‡ï¼ˆé€šè¿‡ä½™å¼¦ç›¸ä¼¼åº¦è¯†åˆ«ï¼‰
-  å†·å´/å……èƒ½å†·å´æ—¶é—´ï¼ŒèŒƒå›´1-375ç§’ï¼Œæœ€é«˜ç²¾åº¦0.05ç§’
-  æŠ€èƒ½å……èƒ½å±‚æ•°ï¼ˆä½¿ç”¨ç‰¹æ®Šå®šåˆ¶å­—ä½“ï¼‰
-  æ˜¯å¦é«˜äº®ï¼ˆæŠ€èƒ½å¯ç”¨æç¤ºï¼‰

###  **ç©å®¶å…‰ç¯ï¼ˆBuff/Debuffï¼‰ä¿¡æ¯**
-  å…‰ç¯å›¾æ ‡
-  å…‰ç¯å‰©ä½™æ—¶é—´ç™¾åˆ†æ¯”
-  å…‰ç¯å¯é©±æ•£ç±»å‹ï¼ˆé­”æ³•ã€è¯…å’’ã€ç–¾ç—…ã€ä¸­æ¯’ç­‰ï¼Œé€šè¿‡é¢œè‰²æ˜ å°„ï¼‰
-  å…‰ç¯å±‚æ•°ï¼ˆç‰¹æ®Šå­—ä½“ï¼‰

###  **ç›®æ ‡/ç„¦ç‚¹ä¿¡æ¯**
-  ç›®æ ‡ç”Ÿå‘½å€¼ç™¾åˆ†æ¯”
-  æ–½æ³•/å¼•å¯¼å›¾æ ‡
-  æ–½æ³•/å¼•å¯¼è¿›åº¦
-  æ–½æ³•/å¼•å¯¼æ˜¯å¦å¯ä»¥æ‰“æ–­
-  ç›®æ ‡æ˜¯å¦å­˜åœ¨ã€å¯æ”»å‡»ã€åœ¨èŒƒå›´å†…ã€å­˜æ´»ç­‰çŠ¶æ€

###  **é˜Ÿå‹ä¿¡æ¯**ï¼ˆé™äºå±å¹•ç©ºé—´ï¼Œä»…æ”¯æŒå°é˜Ÿï¼‰
-  å½“å‰ç”Ÿå‘½å€¼ã€å¸æ”¶ç›¾ï¼ˆç²¾åº¦åŒç©å®¶ï¼‰
-  é€‚é‡å…‰ç¯ä¿¡æ¯ï¼ˆä¸ç©å®¶å…‰ç¯è·å–å†…å®¹ç›¸åŒï¼‰
-  é€‚é‡å…¶ä»–ä¿¡æ¯ï¼ˆèŒä¸šï¼Œè·ç¦»ï¼‰

###  **å…¶ä»–ä¿¡æ¯**
-  è¾…åŠ©æˆ˜æ–—æç¤ºå›¾æ ‡

---

## ğŸ–¼ï¸ ç•Œé¢å›¾ä¾‹

![æ’ä»¶ç•Œé¢å›¾ä¾‹](demo.png)

---

## ğŸ“¦ å®‰è£…ä¸ä½¿ç”¨

### 1. æ’ä»¶å®‰è£…
å°† `Addons/WowPixelDumper/` ç›®å½•å¤åˆ¶åˆ°é­”å…½ä¸–ç•Œå®¢æˆ·ç«¯çš„ `Interface/AddOns/` æ–‡ä»¶å¤¹ä¸­ï¼Œå¯åŠ¨æ¸¸æˆåæ’ä»¶å°†è‡ªåŠ¨åŠ è½½ã€‚  

### 2. Python ç¯å¢ƒé…ç½®ï¼ˆWindowsï¼‰

ç¡®ä¿å·²å®‰è£… [uv](https://github.com/astral-sh/uv)ï¼ˆå¿«é€Ÿ Python åŒ…ç®¡ç†å™¨ï¼‰ï¼š  

```powershell
# å®‰è£… uv
powershell -ExecutionPolicy ByPass -c "irm https://astral.sh/uv/install.ps1 | iex"

# åŒæ­¥ä¾èµ–
uv sync

# è¿è¡Œä¸»ç¨‹åº
uv run .\Dumper\DumperGUI.py

# ç¼–è¯‘ä¸»ç¨‹åº
uv run .\deploy.py
```

### 3. é¦–æ¬¡è¿è¡Œ

**å®šä½åƒç´ åŒºåŸŸï¼š**  
Dumper ä½¿ç”¨ `mark8.png` ä½œä¸ºæ¨¡æ¿æ ‡è®°ï¼Œé€šè¿‡ OpenCV æ¨¡æ¿åŒ¹é…è‡ªåŠ¨å®šä½æ¸¸æˆå†…çš„åƒç´ æ•°æ®åŒºåŸŸã€‚ç¡®ä¿æ¸¸æˆå†…æ’ä»¶å·²å¯ç”¨ä¸”åƒç´ åŒºåŸŸå¯è§ã€‚

**é®æŒ¡æ£€æµ‹ï¼š**  
ç¨‹åºä¼šè‡ªåŠ¨æ£€æµ‹æ¸¸æˆçª—å£æ˜¯å¦è¢«é®æŒ¡ï¼ˆé€šè¿‡æ£€æŸ¥ç‰¹å®šè§’ç‚¹é¢œè‰²ï¼‰ï¼Œè¢«é®æŒ¡æ—¶ä¼šæç¤º"æ¸¸æˆçª—å£è¢«é®æŒ¡æˆ–æ’ä»¶æœªåŠ è½½"ã€‚

### 4. å›¾æ ‡åº“ç®¡ç†

é¦–æ¬¡è¿è¡Œæˆ–å‘ç°æ–°å›¾æ ‡æ—¶ï¼Œç¨‹åºä¼šè‡ªåŠ¨å°†æœªçŸ¥å›¾æ ‡å­˜å…¥æ•°æ®åº“ã€‚ä½¿ç”¨**å›¾æ ‡åº“ç®¡ç†ç•Œé¢**å¯ä»¥ï¼š

- **å›¾æ ‡åº“ç®¡ç† Tab**ï¼šæŸ¥çœ‹æ‰€æœ‰å·²æ•è·çš„å›¾æ ‡ã€ç¼–è¾‘æ ‡é¢˜ã€åˆ é™¤è®°å½•ã€æœç´¢è¿‡æ»¤  
- **æœªåŒ¹é…å›¾æ ‡ Tab**ï¼šæŸ¥çœ‹å®æ—¶æ•è·çš„æœªè¯†åˆ«å›¾æ ‡ï¼Œæ‰‹åŠ¨æ·»åŠ æ ‡é¢˜  
- **ç›¸ä¼¼åº¦åŒ¹é…è®°å½• Tab**ï¼šæŸ¥çœ‹æœ¬ä¼šè¯ä¸­é€šè¿‡ä½™å¼¦ç›¸ä¼¼åº¦è‡ªåŠ¨åŒ¹é…çš„å›¾æ ‡  
- **è®¾ç½® Tab**ï¼šè°ƒæ•´ä½™å¼¦ç›¸ä¼¼åº¦é˜ˆå€¼ï¼ˆé»˜è®¤0.95ï¼ŒèŒƒå›´0.80-0.99ï¼‰ã€æŸ¥çœ‹æ•°æ®åº“ç»Ÿè®¡  

**å¯¼å…¥/å¯¼å‡ºï¼š**  
æ”¯æŒå°†å›¾æ ‡åº“å¯¼å‡ºä¸º JSON æ–‡ä»¶è¿›è¡Œå¤‡ä»½ï¼Œæˆ–ä» JSON æ–‡ä»¶å¯¼å…¥ï¼ˆæ”¯æŒåˆå¹¶æˆ–è¦†ç›–æ¨¡å¼ï¼‰ã€‚

### 5. HTTP API æœåŠ¡

Dumper å†…ç½® Flask HTTP æœåŠ¡å™¨ï¼ˆé»˜è®¤ç«¯å£ **65131**ï¼‰ï¼Œæä¾›å®æ—¶æ¸¸æˆæ•°æ®ï¼š  

```bash
# è·å–å®Œæ•´æ¸¸æˆçŠ¶æ€ï¼ˆæ‰€æœ‰è·¯å¾„è¿”å›ç›¸åŒæ•°æ®ï¼‰
curl http://localhost:65131/
curl http://localhost:65131/api/status
curl http://localhost:65131/any/path

# ç¤ºä¾‹å“åº”
{
  "timestamp": "2026-02-05 10:20:30",
  "player": {
    "status": {
      "health": 85.5,
      "power": 72.0,
      "in_combat": true,
      "cast_icon": "çƒˆç„°é£æš´",
      "cast_duration": 0.65
    },
    "spell": { ... },
    "aura": { ... }
  },
  "target": { ... },
  "focus": { ... },
  "party": { ... }
}
```

**APIåœ°å€è‡ªåŠ¨å¤åˆ¶ï¼š** ç‚¹å‡»ä¸»ç•Œé¢ä¸­çš„ API åœ°å€è¾“å…¥æ¡†ï¼Œå†…å®¹ä¼šè‡ªåŠ¨å¤åˆ¶åˆ°å‰ªè´´æ¿ã€‚  

**æš‚åœåˆ·æ–°ï¼š** ä¸»ç•Œé¢æä¾›"æš‚åœåˆ·æ–°æ—¥å¿—"æŒ‰é’®ï¼Œå¯åœ¨éœ€è¦æ—¶æš‚åœæ•°æ®æ›´æ–°ä»¥ä¾¿æŸ¥çœ‹ã€‚  

---

## ğŸ”§ å¼€å‘ç›¸å…³

### è¿è¡Œæµ‹è¯•
```bash
cd Dumper
python test_script.py
```

### æ•°æ®æµå‘
```
DumperGUI.py (å…¥å£)
    â†“
MainWindow.py (UIæ§åˆ¶)
    â”œâ”€â”€ Worker.py (CameraWorkeræ•è·)
    â”‚       â†“
    â”œâ”€â”€ Utils.py (find_template_boundså®šä½)
    â”‚       â†“
    â”œâ”€â”€ NodeExtractorData.py (extract_all_dataæå–)
    â”‚       â†“
    â”œâ”€â”€ Node.py (Nodeè§£æ)
    â”‚       â†“
    â”œâ”€â”€ Database.py (NodeTitleManageræ ‡é¢˜åŒ¹é…)
    â”‚       â†“
    â””â”€â”€ WebServerWorker (HTTP APIè¾“å‡º)
```

### 8Ã—8 åƒç´ èŠ‚ç‚¹ç»“æ„

æ¯ä¸ªæ•°æ®å•å…ƒæ˜¯ä¸€ä¸ª 8Ã—8 åƒç´ çš„è‰²å—ï¼Œå†…éƒ¨ç»“æ„åˆ†ä¸ºä¸‰å±‚ï¼ˆé€šè¿‡å†…ç¼©é¿å…è¾¹ç¼˜æ¨¡ç³Šï¼‰ï¼š  

| åŒºåŸŸ | åƒç´ èŒƒå›´ | ç”¨é€” |
|------|----------|------|
| `full` | 8Ã—8 | å®Œæ•´åŒºåŸŸï¼Œç”¨äºç›´æ¥æˆªå– |
| `middle` | 6Ã—6 (å†…ç¼©1px) | çº¯è‰²åˆ¤æ–­ã€å–è‰²ã€å“ˆå¸Œè®¡ç®—ã€ç™½å­—è¯†åˆ« |
| `inner` | 4Ã—4 (å†…ç¼©2px) | è®¡ç®—å¹³å‡äº®åº¦ï¼ˆvalueå€¼ï¼‰ |

### æ•°æ®å¸ƒå±€ï¼ˆèŠ‚ç‚¹åæ ‡ï¼‰

åƒç´ æ•°æ®æŒ‰ 8Ã—8 èŠ‚ç‚¹ç½‘æ ¼æ’åˆ—ï¼Œä¸»è¦åŒºåŸŸï¼š  

```
ç©å®¶åŒºåŸŸ (2,2) å¼€å§‹ï¼š
- Buffåºåˆ—:      x=2..29,   y=2  (28ä¸ª)
- Debuffåºåˆ—:    x=30..36,  y=2  (7ä¸ª)
- æŠ€èƒ½åºåˆ—:      x=2..25,   y=6  (24ä¸ª)
- çŠ¶æ€æ ‡å¿—:      x=37..46,  y=2..5
- è¡€é‡/èƒ½é‡:     x=46,      y=2..3

ç›®æ ‡åŒºåŸŸ (47,2) å¼€å§‹ï¼š
- Debuffåºåˆ—:    x=47..53,  y=2  (7ä¸ª)
- æ–½æ³•ä¿¡æ¯:      x=39..44,  y=7

FocusåŒºåŸŸ (47,6) å¼€å§‹ï¼š
- Debuffåºåˆ—:    x=47..53,  y=6  (7ä¸ª)
- æ–½æ³•ä¿¡æ¯:      x=39..44,  y=9

é˜Ÿä¼åŒºåŸŸ (12,10) å¼€å§‹ï¼š
- 4ä¸ªé˜Ÿå‹ï¼Œæ¯ä¸ªå 13åˆ—å®½åº¦
```

### å…³é”®ç±»è¯´æ˜

| ç±»å | æ–‡ä»¶ | èŒè´£ |
|------|------|------|
| `CameraWorker` | Worker.py | DXCam å±å¹•æ•è·å·¥ä½œçº¿ç¨‹ï¼Œæ”¯æŒå¤šæ˜¾ç¤ºå™¨ |
| `WebServerWorker` | Worker.py | Flask HTTP æœåŠ¡çº¿ç¨‹ï¼ˆç«¯å£65131ï¼‰ |
| `NodeExtractor` | Node.py | åƒç´ æ•°æ®æå–å™¨ï¼Œæä¾› `node(x,y)` é“¾å¼è°ƒç”¨ |
| `Node` | Node.py | 8Ã—8åƒç´ èŠ‚ç‚¹ï¼Œå«é¢œè‰²/äº®åº¦/å“ˆå¸Œ/æ ‡é¢˜/å‰©ä½™æ—¶é—´å±æ€§ |
| `NodeTitleManager` | Database.py | å›¾æ ‡æ ‡é¢˜ç®¡ç†ï¼ˆä½™å¼¦ç›¸ä¼¼åº¦åŒ¹é… + xxhashï¼‰ |
| `IconLibraryDialog` | IconLibraryDialog.py | å›¾æ ‡åº“ç®¡ç† GUIï¼ˆ4ä¸ªTabï¼‰ |
| `LogEmitter` / `LogRedirector` | MainWindow.py | æ—¥å¿—ä¿¡å·ç³»ç»Ÿå’Œ print é‡å®šå‘ |

### é¢œè‰²æ˜ å°„ï¼ˆColorMap.jsonï¼‰

æ¸¸æˆå†…é€šè¿‡çº¯è‰²èŠ‚ç‚¹ä¼ é€’æšä¸¾ç±»å‹æ•°æ®ï¼š  

- **èŒä¸šï¼ˆClassï¼‰**ï¼šçº¢è‰²=æˆ˜å£«ã€ç²‰è‰²=åœ£éª‘å£«ã€æ©™è‰²=çŒäººç­‰  
- **èŒè´£ï¼ˆRoleï¼‰**ï¼šç»¿è‰²=å¦å…‹ã€è“è‰²=æ²»ç–—ã€çº¢è‰²=è¾“å‡º  
- **Buffç±»å‹**ï¼šé’è‰²=é­”æ³•ã€ç´«è‰²=è¯…å’’ã€é»„è‰²=ç–¾ç—…ã€ç»¿è‰²=ä¸­æ¯’  

---

## âš ï¸ å…è´£å£°æ˜âš ï¸

1. **åˆ‡å‹¿ç›´æ¥ä½¿ç”¨**ï¼šæœ¬é¡¹ç›®çš„ä»£ç ç‰¹å¾æ˜æ˜¾ï¼Œå¦‚æœå¤§é‡ç”¨æˆ·ä½¿ç”¨å®Œå…¨ç›¸åŒçš„ä»£ç ï¼Œææ˜“è¢«æ¸¸æˆåä½œå¼Šç³»ç»Ÿæ£€æµ‹å¹¶å¯¼è‡´**è´¦å·å°ç¦**ã€‚  
2. **å¿…é¡»ä¸ªæ€§åŒ–ä¿®æ”¹**ï¼šå¼ºçƒˆå»ºè®®æ‚¨æ ¹æ®è‡ªèº«éœ€æ±‚å¯¹ä»£ç è¿›è¡Œä¿®æ”¹å’Œå®šåˆ¶ã€‚è°ƒæ•´åƒç´ å¸ƒå±€ã€æ•°æ®ç»“æ„æˆ–é€šä¿¡æ–¹å¼ï¼Œä½¿å…¶å…·å¤‡ç‹¬ç‰¹æ€§ã€‚  
3. **æŠ›ç –å¼•ç‰ï¼Œéå¼€ç®±å³ç”¨**ï¼šæœ¬é¡¹ç›®æ—¨åœ¨å±•ç¤º"å°†æ¸¸æˆæ•°æ®è½¬æ¢ä¸ºåƒç´ å—å¹¶é€šè¿‡å¤–éƒ¨ç¨‹åºè§£æ"çš„æŠ€æœ¯æ€è·¯ï¼Œè€Œéæä¾›å¯ç›´æ¥æŠ•å…¥ä½¿ç”¨çš„äº§å“ã€‚  
4. **è‡ªè¡Œæ‰¿æ‹…å…¨éƒ¨é£é™©**ï¼šä»»ä½•åŸºäºæœ¬é¡¹ç›®çš„äºŒæ¬¡å¼€å‘ã€ä¿®æ”¹æˆ–ä½¿ç”¨è¡Œä¸ºï¼Œå‡ç”±æ‚¨è‡ªè¡Œæ‰¿æ‹…ä¸€åˆ‡åæœï¼ˆåŒ…æ‹¬ä½†ä¸é™äºè´¦å·å°ç¦ã€æ•°æ®æŸå¤±ç­‰ï¼‰ã€‚  
5. **ç¦æ­¢å•†ç”¨ä¸æŸå®³å…¬å¹³**ï¼šä¸å¾—å°†æœ¬é¡¹ç›®ç”¨äºä»»ä½•å•†ä¸šç”¨é€”ï¼Œæˆ–å¼€å‘æŸå®³æ¸¸æˆå…¬å¹³æ€§çš„å¤–æŒ‚/è‡ªåŠ¨åŒ–å·¥å…·ã€‚  

---

# English Appendix

## Origin and Purpose

This project was born from a simple idea: **In patch 12.0, pass Secret Values to external programs through pixelization**.

Previously, WoW's addon API provided abundant game data, but in the latest game updates, this data has been restricted to "Secret Values" and cannot be used. However, Secret Values can be encoded as colored pixel blocks in screen corners, allowing external programs to capture structured information through screen capture.

**This is not an outâ€‘ofâ€‘theâ€‘box product, but a technical demonstration.** The code is fully openâ€‘source, aiming to showcase the feasibility of the "pixel bridge" concept. If you resonate with this direction, we recommend performing **personalized modifications** on top of itâ€”adjust pixel layouts, modify data structures, change communication methodsâ€”to make it your own unique implementation.

**How to start?** We recommend using the **vibe coding** approach: leverage AI programming tools (like Cline, Cursor, Copilot, Antigravity, etc.) to help you understand the code logic and perform lightweight refactoring of this project. Even if you're not a professional developer, you can describe your needs in natural language and quickly generate code variants that suit your habits, thereby removing the identifiable features of this project.

The project adopts a **Dumper + HTTP API** architecture: Dumper handles pixel capture and parsing, outputting data in JSON format through a local HTTP service (default port 65131). This decoupled design allows you to independently develop subsequent Rotation logic in any language you prefer (Python, C#, Lua, etc.).

---

A **gameâ€‘data pixelization addon** for *World of Warcraft* that converts collectible information inâ€‘game into pixel dots at screen corners, allowing external programs to easily read and parse them into structured data.

> âš ï¸ **Important Notice**: This project is solely a technical demonstration and conceptual reference; **do not use it directly in a live game environment**, or it may result in account suspension. The project aims to spark ideas, showcasing a dataâ€‘extraction approachâ€”users assume all risks.

---

## Important

Many pitfalls have been encountered, frequent refactoring occurs; don't worry about git history. This is the 7th referenceâ€‘worthy version.

---

## ğŸ§  How It Works

Gameâ€‘built APIs render various game information (health, skill cooldowns, aura effects, etc.) as a series of **8Ã—8 pixel blocks** at screen corners, each block representing a specific piece of information. An external Python program captures these blocks via screen capture, processes them efficiently with NumPy, and finally outputs structured JSON data or provides a Web API service.

**Why Pixel Blocks?**  
- Easy to be read by `numpy` as arrays, avoiding complex image recognition and largeâ€‘model computation
- Extremely low performance overhead, suitable for highâ€‘frequency refresh
- Fixed structure, simple and reliable parsing logic

---

## ğŸ—ï¸ Project Structure

```
WowPixelDumper/
â”œâ”€â”€ Addons/WowPixelDumper/     # WoW Addon
â”‚   â”œâ”€â”€ WowPixelDumper.lua     # Addon main logic
â”‚   â”œâ”€â”€ WowPixelDumper.toc     # Addon configuration
â”‚   â”œâ”€â”€ Setting.lua            # Settings
â”‚   â”œâ”€â”€ Class/                 # Classâ€‘specific configuration
â”‚   â”‚   â”œâ”€â”€ Druid.lua
â”‚   â”‚   â””â”€â”€ Priest.lua
â”‚   â”œâ”€â”€ Fonts/                 # Custom fonts (layer/charge display)
â”‚   â””â”€â”€ Libs/                  # Dependency libraries (LibRangeCheck, etc.)
â”‚
â”œâ”€â”€ Dumper/                    # Python data extractor
â”‚   â”œâ”€â”€ DumperGUI.py           # Program entry
â”‚   â”œâ”€â”€ MainWindow.py          # Main window (UI control, occlusion detection)
â”‚   â”œâ”€â”€ Worker.py              # Worker threads (CameraWorker + WebServerWorker)
â”‚   â”œâ”€â”€ IconLibraryDialog.py   # Icon library management dialog (4 tabs)
â”‚   â”œâ”€â”€ Node.py                # Node + NodeExtractor (pixel node parsing)
â”‚   â”œâ”€â”€ NodeExtractorData.py   # extract_all_data + ColorMap loading
â”‚   â”œâ”€â”€ Database.py            # NodeTitleManager (SQLite database, cosine similarity)
â”‚   â”œâ”€â”€ Utils.py               # Utility functions (template matching, bounds finding)
â”‚   â”œâ”€â”€ test_script.py         # Functional test script
â”‚   â”œâ”€â”€ comment_deleter.py     # AST comment deletion tool
â”‚   â”œâ”€â”€ mark8.png              # Template marker (locating pixel region)
â”‚   â”œâ”€â”€ node_titles.db         # SQLite database (generated at runtime)
â”‚   â””â”€â”€ ColorMap.json          # Color mapping configuration (class, buff types, etc.)
â”‚
â”œâ”€â”€ README.md                  # This file
â”œâ”€â”€ CHANGELOG.md               # Changelog
â”œâ”€â”€ pyproject.toml             # Python dependency configuration
â””â”€â”€ deploy.py                  # Build script
```

---

## ğŸš€ Currently Implemented Features

### **Player Information**
-  Current health percentage (precision 1/255, calculated from brightness value)
-  Current power percentage (calculated from brightness value)
-  Damage absorption shield as percentage of total health (precision 1.25%)
-  Healing absorption shield as percentage of total health (precision 1.25%)
-  Whether moving
-  Whether in combat
-  Whether in a vehicle
-  Whether casting/channeling
-  Cast icon / channel icon
-  Cast progress / channel progress
-  Class and role (via color mapping)
-  Death status
-  And more..

### **Skill Information**
-  Skill icon (identified via cosine similarity)
-  Cooldown/charge cooldown time, range 1â€‘375 seconds, highest precision 0.05 seconds
-  Skill charge layers (uses special custom font)
-  Whether highlighted (skillâ€‘available indication)

### **Player Aura (Buff/Debuff) Information**
-  Aura icon
-  Aura remaining time percentage
-  Aura dispellable type (magic, curse, disease, poison, etc., via color mapping)
-  Aura layers (special font)

### **Target/Focus Information**
-  Target health percentage
-  Cast/channel icon
-  Cast/channel progress
-  Whether cast/channel can be interrupted
-  Target existence, attackable, in range, alive, etc.

### **Party Information** (limited by screen space, party only)
-  Current health, absorption shield (same precision as player)
-  Appropriate aura information (same content as player auras)
-  Appropriate other information (class, distance)

### **Other Information**
-  Auxiliary combatâ€‘tip icons

---

## ğŸ–¼ï¸ Interface Illustration

![Interface Illustration](demo.png)

---

## ğŸ“¦ Installation and Usage

### 1. Addon Installation
Copy the `Addons/WowPixelDumper/` directory into the `Interface/AddOns/` folder of your World of Warcraft client. The addon will load automatically when the game starts.

### 2. Python Environment Setup (Windows)

Ensure you have [uv](https://github.com/astral-sh/uv) installed (a fast Python package manager):

```powershell
# Install uv
powershell -ExecutionPolicy ByPass -c "irm https://astral.sh/uv/install.ps1 | iex"

# Sync dependencies
uv sync

# Run the main program
uv run .\Dumper\DumperGUI.py

# Build the main program
uv run .\deploy.py
```

### 3. First Run

**Locating the Pixel Region:**  
Dumper uses `mark8.png` as a template marker, automatically locating the pixelâ€‘data region inâ€‘game via OpenCV template matching. Ensure the addon is enabled inâ€‘game and the pixel region is visible.

**Occlusion Detection:**  
The program automatically detects whether the game window is occluded (by checking specific cornerâ€‘point colors) and will prompt "Game window is occluded or addon not loaded" when occluded.

### 4. Icon Library Management

On first run or when new icons are discovered, the program automatically stores unknown icons in the database. Using the **icon library management interface** you can:

- **Icon Library Tab**: View all captured icons, edit titles, delete records, search and filter
- **Unmatched Icons Tab**: View realâ€‘time captured unidentified icons, manually add titles
- **Similarityâ€‘match Records Tab**: View icons automatically matched via cosine similarity in this session
- **Settings Tab**: Adjust cosineâ€‘similarity threshold (default 0.95, range 0.80â€‘0.99), view database statistics

**Import/Export:**  
Supports exporting the icon library as a JSON file for backup, or importing from a JSON file (supports merge or overwrite modes).

### 5. HTTP API Service

Dumper includes a builtâ€‘in Flask HTTP server (default port **65131**) that provides realâ€‘time game data:

```bash
# Get full game status (all paths return the same data)
curl http://localhost:65131/
curl http://localhost:65131/api/status
curl http://localhost:65131/any/path

# Example response
{
  "timestamp": "2026-02-05 10:20:30",
  "player": {
    "status": {
      "health": 85.5,
      "power": 72.0,
      "in_combat": true,
      "cast_icon": "Firestorm",
      "cast_duration": 0.65
    },
    "spell": { ... },
    "aura": { ... }
  },
  "target": { ... },
  "focus": { ... },
  "party": { ... }
}
```

**API Address Autoâ€‘copy**: Clicking the API address input box in the main interface will automatically copy its contents to the clipboard.

**Pause Refresh**: The main interface provides a "Pause Refresh Log" button that can pause data updates when needed for inspection.

---

## ğŸ”§ Development Information

### Running Tests
```bash
cd Dumper
python test_script.py
```

### Data Flow
```
DumperGUI.py (Entry)
    â†“
MainWindow.py (UI Control)
    â”œâ”€â”€ Worker.py (CameraWorker Capture)
    â”‚       â†“
    â”œâ”€â”€ Utils.py (find_template_bounds Locating)
    â”‚       â†“
    â”œâ”€â”€ NodeExtractorData.py (extract_all_data Extraction)
    â”‚       â†“
    â”œâ”€â”€ Node.py (Node Parsing)
    â”‚       â†“
    â”œâ”€â”€ Database.py (NodeTitleManager Title Matching)
    â”‚       â†“
    â””â”€â”€ WebServerWorker (HTTP API Output)
```

### 8Ã—8 Pixel Node Structure

Each data unit is an 8Ã—8 pixel color block with a threeâ€‘layer internal structure (inset to avoid edge blurring):

| Area | Pixel Range | Purpose |
|------|----------|------|
| `full` | 8Ã—8 | Full area, used for direct capture |
| `middle` | 6Ã—6 (inset 1px) | Solidâ€‘color judgment, color extraction, hash calculation, whiteâ€‘character recognition |
| `inner` | 4Ã—4 (inset 2px) | Calculate average brightness (value) |

### Data Layout (Node Coordinates)

Pixel data is arranged in an 8Ã—8 node grid, with main regions:

```
Player Region starting at (2,2):
- Buff sequence: x=2..29, y=2 (28 items)
- Debuff sequence: x=30..36, y=2 (7 items)
- Skill sequence: x=2..25, y=6 (24 items)
- Status flags: x=37..46, y=2..5
- Health/power: x=46, y=2..3

Target Region starting at (47,2):
- Debuff sequence: x=47..53, y=2 (7 items)
- Casting info: x=39..44, y=7

Focus Region starting at (47,6):
- Debuff sequence: x=47..53, y=6 (7 items)
- Casting info: x=39..44, y=9

Party Region starting at (12,10):
- 4 party members, each occupies 13 column width
```

### Key Classes

| Class | File | Responsibilities |
|------|------|------|
| `CameraWorker` | Worker.py | DXCam screenâ€‘capture worker thread, supports multiple displays |
| `WebServerWorker` | Worker.py | Flask HTTP service thread (port 65131) |
| `NodeExtractor` | Node.py | Pixel data extractor, provides `node(x,y)` chained calls |
| `Node` | Node.py | 8Ã—8 pixel node, containing color/brightness/hash/title/remainingâ€‘time attributes |
| `NodeTitleManager` | Database.py | Icon title management (cosineâ€‘similarity matching + xxhash) |
| `IconLibraryDialog` | IconLibraryDialog.py | Icon library management GUI (4 tabs) |
| `LogEmitter` / `LogRedirector` | MainWindow.py | Log signal system and print redirection |

### Color Mapping (ColorMap.json)

Inâ€‘game, enumerationâ€‘type data is transmitted via solidâ€‘color nodes:

- **Class**: Red = Warrior, Pink = Paladin, Orange = Hunter, etc.
- **Role**: Green = Tank, Blue = Healer, Red = DPS
- **Buff Types**: Cyan = Magic, Purple = Curse, Yellow = Disease, Green = Poison

---

## âš ï¸ Disclaimerâš ï¸

1. **Do Not Use Directly**: This project's code has distinctive characteristics; if a large number of users use exactly the same code, it is highly likely to be detected by the game's antiâ€‘cheat system and result in **account suspension**.
2. **Personalization Required**: It is strongly recommended that you modify and customize the code according to your own needs. Adjust pixel layouts, data structures, or communication methods to make it unique.
3. **A Spark for Ideas, Not Outâ€‘ofâ€‘theâ€‘Box**: This project aims to demonstrate the technical concept of "converting game data into pixel blocks and parsing them via external programs," not to provide a readyâ€‘toâ€‘use product.
4. **Assume All Risks**: Any secondary development, modification, or use based on this project is entirely at your own risk (including but not limited to account suspension, data loss, etc.).
5. **No Commercial Use or Fairâ€‘Play Harm**: This project must not be used for any commercial purposes, nor for developing cheats/automation tools that undermine game fairness.